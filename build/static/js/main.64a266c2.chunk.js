(this.webpackJsonpskincare=this.webpackJsonpskincare||[]).push([[0],{271:function(e,t,n){},272:function(e,t,n){},487:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(45),i=n.n(r),o=(n(271),n(272),n(259)),s=n(13),u=n(111),l=n(49),d=n(115),j=n(114),b=n(34),p=n(506),f=n(9),h=n(515),g=n(507),O=n(508),x=n(491),m=n(509),v=n(514),y=n(510),k=n(85),S=(n(273),n(489),n(275),k.a.initializeApp({apiKey:"AIzaSyBedqE9f5jZgV6norZuzhMD7ahI3Ou82as",authDomain:"skincare-789bd.firebaseapp.com",projectId:"skincare-789bd",storageBucket:"skincare-789bd.appspot.com",messagingSenderId:"617410021385",appId:"1:617410021385:web:5b0dd764285ba423ffd0d8",measurementId:"G-6262JN1WXB"})),w=k.a.firestore(),B=k.a.auth(),C=new k.a.auth.GoogleAuthProvider,I=n(4),R=Object(p.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,maxWidth:960,marginTop:e.spacing(5),margin:"auto"},container:{marginBottom:e.spacing(2)},button:{marginLeft:e.spacing(2)}}})),A=Object(f.a)({root:{color:"#52af77",height:2},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(h.a);function N(){var e=R(),t=S.auth().currentUser,n=w.collection("users"),a=Object(c.useState)(30),r=Object(b.a)(a,2),i=r[0],o=r[1],s=Object(c.useState)(30),u=Object(b.a)(s,2),l=u[0],d=u[1];if(null!=t)var j=t.email,p=n.doc(t.email);return Object(I.jsx)("div",{className:e.root,children:Object(I.jsx)(g.a,{children:Object(I.jsxs)(O.a,{className:e.paper,children:[Object(I.jsx)(g.a,{className:e.container,children:Object(I.jsx)(x.a,{gutterBottom:!0,children:"Customization Engine"})}),Object(I.jsxs)(m.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(I.jsx)(m.a,{item:!0,xs:4,sm:2,children:Object(I.jsx)(x.a,{children:"Ingredient 1"})}),Object(I.jsx)(m.a,{item:!0,xs:8,sm:4,children:Object(I.jsx)(A,{valueLabelDisplay:"auto","aria-label":"pretto slider",value:i,onChange:function(e,t){o(t)}})})]}),Object(I.jsxs)(m.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:[Object(I.jsx)(m.a,{item:!0,xs:4,sm:2,children:Object(I.jsx)(x.a,{children:"Ingredient 2"})}),Object(I.jsx)(m.a,{item:!0,xs:8,sm:4,children:Object(I.jsx)(A,{valueLabelDisplay:"auto","aria-label":"pretto slider",value:l,onChange:function(e,t){d(t)}})})]}),Object(I.jsx)(v.a,{pt:2,children:Object(I.jsxs)(m.a,{container:!0,children:[Object(I.jsx)(m.a,{container:!0,item:!0,justify:"flex-start",xs:6,children:Object(I.jsx)(y.a,{variant:"outlined",size:"small",children:"Reset"})}),Object(I.jsxs)(m.a,{container:!0,item:!0,justify:"flex-end",xs:6,children:[Object(I.jsx)(y.a,{variant:"outlined",size:"small",className:e.button,onClick:function(){t?(console.log(i,l,j),p.get().then((function(e){e.exists?n.doc(j).update({product:{ingredient1:i,ingredient2:l}}).then((function(){alert("Document successfully updated!"),console.log("Document successfully updated!")})):n.doc(j).set({userEmail:j,product:{productId:"mockProduct 1",ingredient1:i,ingredient2:l}}).then((function(){alert("Document successfully created!"),console.log("Document successfully created!")}))}))):B.signInWithPopup(C).then((function(){alert("Please click save button again after logged in (to be enhance)"),console.log("middleware to check auth is success before call an api")}))},children:"Save"}),Object(I.jsx)(y.a,{variant:"outlined",size:"small",className:e.button,children:"Buy"})]})]})})]})})})}var E=n(511);function z(){return Object(I.jsxs)(x.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(I.jsx)(E.a,{color:"inherit",href:"/",children:"Yourcare"})," ",(new Date).getFullYear(),"."]})}var D=Object(p.a)((function(e){return{footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(0,0)}}}));function L(e){var t=D(),n=e.description,c=e.title;return Object(I.jsx)("footer",{className:t.footer,children:Object(I.jsxs)(g.a,{maxWidth:"lg",children:[Object(I.jsx)(x.a,{variant:"h6",align:"center",gutterBottom:!0,children:c}),Object(I.jsx)(x.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p",children:n}),Object(I.jsx)(z,{})]})})}var F=n(512),T=n(513),P=n(252),W=n.n(P),U=a.a.createContext(),q=function(e){var t=e.children,n=Object(c.useState)(!0),a=Object(b.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(null),s=Object(b.a)(o,2),u=s[0],l=s[1];return Object(c.useEffect)((function(){S.auth().onAuthStateChanged((function(e){l(e),i(!1)}))}),[]),r?Object(I.jsx)("p",{children:"Loading..."}):Object(I.jsx)(U.Provider,{value:{currentUser:u},children:t})};var G=function(){var e=Object(c.useContext)(U).currentUser;return Object(I.jsx)("div",{children:e?Object(I.jsx)(y.a,{onClick:function(){B.signOut()},variant:"outlined",size:"small",children:"Log out"}):Object(I.jsx)(y.a,{onClick:function(){B.signInWithPopup(C)},variant:"outlined",size:"small",children:"Log in"})})},J=Object(p.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0}}}));function M(e){var t=J(),n=e.title;return Object(I.jsx)(a.a.Fragment,{children:Object(I.jsxs)(F.a,{className:t.toolbar,children:[Object(I.jsx)(y.a,{size:"small",children:"Yourcare"}),Object(I.jsx)(x.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:t.toolbarTitle,children:n}),Object(I.jsx)(T.a,{children:Object(I.jsx)(W.a,{})}),Object(I.jsx)(G,{})]})})}var Y=Object(p.a)((function(e){return{root:{flexGrow:1,marginTop:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary,maxWidth:960,margin:"auto"},container:{marginBottom:e.spacing(2)},button:{marginLeft:e.spacing(2)}}}));var V=function(){var e=Y(),t=Object(c.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){var e=w.collection("products"),t=[];e.get().then((function(e){e.forEach((function(e){console.log(e.id),t.push({id:e.id,data:e.data()})})),r(t),console.log(t)}))}),[]),Object(I.jsx)("div",{className:e.root,children:Object(I.jsx)(m.a,{container:!0,xs:12,children:a.map((function(t){return Object(I.jsx)(g.a,{className:e.container,children:Object(I.jsx)(O.a,{className:e.paper,children:Object(I.jsx)(m.a,{xs:12,children:Object(I.jsxs)(m.a,{item:!0,xs:12,children:[Object(I.jsx)(x.a,{gutterBottom:!0,variant:"inherit",component:"h4",children:t.data.productName}),Object(I.jsxs)(x.a,{children:["Base Price: ",t.data.basePrice," Baht"]}),Object(I.jsx)(m.a,{container:!0,item:!0,justify:"flex-end",xs:12,children:Object(I.jsx)(y.a,{variant:"outlined",size:"small",className:e.button,children:"View more info"})})]})},t.id)})})}))})})},X=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(M,{}),Object(I.jsx)(N,{}),Object(I.jsx)(V,{}),Object(I.jsx)(L,{})]})}}]),n}(c.Component),Z=n(60),K=n(31),$=n(58),H=Object(K.b)("api/callBegan"),Q=Object(K.b)("api/callSuccess"),_=Object(K.b)("api/callFailed"),ee=n(164),te=n.n(ee),ne=Object(K.c)({name:"bugs",initialState:{list:[],loading:!1,lastFetch:null},reducers:{bugsRequested:function(e,t){e.loading=!0},bugsReceived:function(e,t){e.list=t.payload,e.loading=!1,e.lastFetch=Date.now()},bugsRequestFailed:function(e,t){e.loading=!1},bugAssignedToUser:function(e,t){var n=t.payload,c=n.id,a=n.userId,r=e.list.findIndex((function(e){return e.id===c}));e.list[r].userId=a},bugAdded:function(e,t){e.list.push(t.payload)},bugResolved:function(e,t){var n=e.list.findIndex((function(e){return e.id===t.payload.id}));e.list[n].resolved=!0}}}),ce=ne.actions,ae=(ce.bugAdded,ce.bugResolved),re=(ce.bugAssignedToUser,ce.bugsReceived),ie=ce.bugsRequested,oe=ce.bugsRequestFailed,se=ne.reducer,ue="/bugs",le=function(){return function(e,t){var n=t().entities.bugs.lastFetch;if(!(te()().diff(te()(n),"minutes")<10))return e(H({url:ue,onStart:ie.type,onSuccess:re.type,onError:oe.type}))}},de=function(e){return H({url:"/bugs/"+e,method:"patch",data:{resolved:!0},onSuccess:ae.type})},je=Object($.a)((function(e){return e.entities.bugs}),(function(e){return e.entities.projects}),(function(e,t){return e.list.filter((function(e){return!e.resolved}))})),be=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadBugs()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return Object(I.jsx)("ul",{children:this.props.bugs.map((function(t){return Object(I.jsxs)("li",{children:[t.description,Object(I.jsx)("button",{onClick:function(){return e.props.resolveBug(t.id)},children:"Resolve"})]},t.id)}))})}}]),n}(c.Component),pe=Object(Z.b)((function(e){return{bugs:je(e)}}),(function(e){return{loadBugs:function(){return e(le())},resolveBug:function(t){return e(de(t))}}}))(be),fe=n(33),he=n(25),ge=n(255),Oe=n(256),xe=0,me=Object(K.c)({name:"projects",initialState:[],reducers:{projectAdded:function(e,t){e.push({id:++xe,name:t.payload.name})}}}),ve=(me.actions.projectAdded,me.reducer),ye=0,ke=Object(K.c)({name:"users",initialState:[],reducers:{userAdded:function(e,t){e.push({id:++ye,name:t.payload.name})}}}),Se=(ke.actions.userAdded,ke.reducer),we=Object(he.c)({bugs:se,projects:ve,users:Se,firebase:ge.firebaseReducer,firestore:Oe.firestoreReducer}),Be=Object(he.c)({entities:we}),Ce=function(e){return function(e){return function(t){if("error"!==t.type)return e(t);console.log("Toastify",t.payload.message)}}},Ie=n(165),Re=n.n(Ie),Ae=n(257),Ne=n(258),Ee=n.n(Ne),ze=function(e){var t=e.dispatch;return function(e){return function(){var n=Object(Ae.a)(Re.a.mark((function n(c){var a,r,i,o,s,u,l,d;return Re.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.type===H.type){n.next=2;break}return n.abrupt("return",e(c));case 2:return a=c.payload,r=a.url,i=a.method,o=a.data,s=a.onStart,u=a.onSuccess,l=a.onError,s&&t({type:s}),e(c),n.prev=5,n.next=8,Ee.a.request({baseURL:"http://localhost:9001/api",url:r,method:i,data:o});case 8:d=n.sent,t(Q(d.data)),u&&t({type:u,payload:d.data}),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(5),t(_(n.t0.message)),l&&t({type:l,payload:n.t0.message});case 17:case"end":return n.stop()}}),n,null,[[5,13]])})));return function(e){return n.apply(this,arguments)}}()}};var De=function(){var e=Object(Z.c)(),t=Object(Z.d)(je);return Object(c.useEffect)((function(){e(le())}),[]),Object(I.jsx)("ul",{children:t.map((function(t){return Object(I.jsxs)("li",{children:[t.description,Object(I.jsx)("button",{onClick:function(){return e(de(t.id))},children:"Resolve"})]},t.id)}))})};var Le=function(){return Object(c.useEffect)((function(){w.collection("users").get().then((function(e){e.docs.forEach((function(e){console.log(e.data())}))}))}),[]),Object(I.jsx)("div",{})},Fe=Object(K.a)({reducer:Be,middleware:[].concat(Object(fe.a)(Object(K.d)()),[Ce,ze])});var Te=function(){return Object(I.jsx)(q,{children:Object(I.jsx)(Z.a,{store:Fe,children:Object(I.jsx)(o.a,{children:Object(I.jsxs)(s.c,{children:[Object(I.jsx)(s.a,{exact:!0,path:"/",component:X}),Object(I.jsx)(s.a,{exact:!0,path:"/1",component:pe}),Object(I.jsx)(s.a,{exact:!0,path:"/2",component:De}),Object(I.jsx)(s.a,{exact:!0,path:"/3",component:Le})]})})})})};i.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(Te,{})}),document.getElementById("root"))}},[[487,1,2]]]);
//# sourceMappingURL=main.64a266c2.chunk.js.map